# 14. JDBC (21íšŒì°¨(3/20),22íšŒì°¨(3/21))

### JDBC ê°œìš”

- ìë°”ì™€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì—°ê²°í•˜ì—¬ ì…ì¶œë ¥ ì‘ì—…í•  ìˆ˜ ìˆëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬(java.sql íŒ¨í‚¤ì§€)
- JDBCì— í¬í•¨ëœ í´ë˜ìŠ¤ì™€ ì¸í„°í˜ì´ìŠ¤ ì—°ê´€ê´€ê³„
    
    <img src="/02. JAVA/00. img/15-1.png" width="400">
    
    ### DriverManager (class)
    
    - JDBC Driverë¥¼ ê´€ë¦¬
    - **DBì™€ ì—°ê²°í•´ì„œ Connection êµ¬í˜„ ê°ì²´ ìƒì„±**
    
    ### Connection (interface)
    
    - Statement, PreparedStatement, CallableStatement êµ¬í˜„ ê°ì²´ ìƒì„±
    - íŠ¸ëœì­ì…˜(Transaction) ì²˜ë¦¬ ë° DB ì—°ê²°ì„ ëŠì„ ë•Œ ì‚¬ìš©í•œë‹¤.
    
    ### Statement (interface)
    
    - SQLì˜ DDL(Data Definition Language)ê³¼ DML(Data Manipulation Language)ì„ ì‹¤í–‰í•  ë•Œ ì‚¬ìš©
    - ì£¼ë¡œ **ë³€ê²½ë˜ì§€ ì•ŠëŠ” ì •ì  SQL ë¬¸ì„ ì‹¤í–‰**í•  ë•Œ ì‚¬ìš©
    
    ### PreparedStatement
    
    - Statementì™€ ë™ì¼í•˜ê²Œ SQLì˜ DDL, DML ë¬¸ì„ ì‹¤í–‰í•  ë•Œ ì‚¬ìš©
    - ì°¨ì´ì ì€ ë§¤ê°œë³€ìˆ˜í™”ëœ SQL ë¬¸ì„ ì‚¬ìš©í•  ìˆ˜ ìˆê¸° ë•Œë¬¸ì— í¸ë¦¬ì„±ê³¼ ë³´ì•ˆì„±ì´ ì¢‹ìŒ(ë™ì  SQLë„ ì‚¬ìš© ê°€ëŠ¥)
    - Statement ë³´ë‹¤ëŠ” **PreparedStatementë¥¼ ì£¼ë¡œ ì‚¬ìš©**í•œë‹¤.
    
    ### CallableStatement
    
    - DBì— ì €ì¥ë˜ì–´ ìˆëŠ” í”„ë¡œì‹œì €ì™€ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ë•Œ ì‚¬ìš©(ì˜ ì•ˆì”€)
    
    ### ResultSet
    
    - DBì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ì½ì„ ë•Œ ì‚¬ìš©

### DBì—°ê²°

- JDBS Driver: IPì£¼ì†Œë¥¼ ë°›ì•„ í¬íŠ¸ë²ˆí˜¸ë¡œ ì—°ê²°í•´ì¤Œ
    1. DBMSê°€ ì„¤ì¹˜ëœ ì»´í“¨í„°ì˜ IP ì£¼ì†Œ
    2. DBMSê°€ í—ˆìš©í•˜ëŠ” í¬íŠ¸(Port) ë²ˆí˜¸
    3. ì‚¬ìš©ì(DB ê³„ì •) ë° ë¹„ë°€ë²ˆí˜¸
    4. ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” DB ì´ë¦„

### JDBC ë“œë¼ì´ë²„ ë‹¤ìš´

1. [MySQL ë“œë¼ì´ë²„ ë‹¤ìš´ë¡œë“œ](https://dev.mysql.com/downloads/connector/j/) > ì•„ì¹´ì´ë¸Œ ì„ íƒ > platform idnependent > zip ë‹¤ìš´
    
    <img src="/02. JAVA/00. img/15-2.png" width="400">
    
2. ì´í´ë¦½ìŠ¤ì— jar íŒŒì¼ ì¶”ê°€
    
    <img src="/02. JAVA/00. img/15-3.png" width="400">
    
    <img src="/02. JAVA/00. img/15-4.png" width="400">
    
    3ë²ˆ ìœ„ì¹˜ ì˜ëª»ë¨. Add External JARS,. ì„ íƒí•´ì•¼í•¨
    
    <img src="/02. JAVA/00. img/15-5.png" width="400">
    

### ìë°”ì™€ mysql ì—°ê²°

- í´ë¼ì´ì–¸íŠ¸ í”„ë¡œê·¸ë¨ì„ DBì™€ ì—°ê²°í•˜ê¸° ìœ„í•´ JDBC Driverë¥¼ ë©”ëª¨ë¦¬ë¡œ ë¡œë”©
- ì—°ê²° ì„±ê³µ ì‹œ getConnection() ë©”ì†Œë“œëŠ” Connection ê°ì²´ ë¦¬í„´
- ì—°ê²° ì‹¤íŒ¨ ì‹œ SQLExceptionì´ ë°œìƒí•˜ë‹ˆê¹Œ ì˜ˆì™¸ ì²˜ë¦¬í•´ì•¼ í•¨
- JDBCë¥¼ ë„£ì€ íŒ¨í‚¤ì§€ì—ì„œ í´ë˜ìŠ¤ì™€ ì—°ê²°
    
    ```sql
    package test; //JDBCë„£ì€ íŒ¨í‚¤ì§€
    
    import java.sql.Connection;
    import java.sql.DriverManager;
    
    public class Mysql {
    	public static Connection get() { //main()í•¨ìˆ˜ ëŒ€ì‹  Connertion
    		Connection con = null; //import java.sql.Connection;
    		
    		try {
    			String id="root"; //mySQL id
    			String pw="1234";
    			String url="jdbc:mysql://localhost:3306/sjh"; //mySQLì˜ ë¡œì»¬í˜¸ìŠ¤íŠ¸ëª…, í”„ë¡œì íŠ¸ëª…
    			
    			Class.forName("com.mysql.cj.jdbc.Driver");
    			// Class í´ë˜ìŠ¤ë¡œ mysql ë“œë¼ì´ë²„ë¥¼ ë¡œë”©í•˜ëŠ” ì½”ë“œ â†’DriverManagerì— ë“±ë¡ë¨
    			
    			con = DriverManager.getConnection(url, id, pw); //import java.sql.DriverManager;
    			//Connerchionê°ì²´ë¥¼ ì–»ìŒ
    			//conì€ ì‹¤ì œë¡œ ë°ì´í„°ë² ì´ìŠ¤dhk ì—°ê²°í•˜ì—¬ ì‘ì—…ì„ ìˆ˜í•¼í•  ìˆ˜ ìˆëŠ” í†µë¡œë¥¼ ì‘ìš©í•˜ëŠ”
    			//ì¤‘ìš”í•œ ê°ì²´ ë³€ìˆ˜ë¡œ ì‚¬ìš©ë¨!
    			
    			System.out.println("ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°ë¨");
    		}catch(Exception e) {
    			System.out.println("ë¡œë”©ì‹¤íŒ¨");
    		}
    		return con;	
    	}
    }
    ```
    

### SQL ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

- JDBC Driverì™€ ì—°ê²°ëœ í´ë˜ìŠ¤(Mysql)ì˜ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ ì‚¬ìš©
- ë°ì´í„° ê°€ì ¸ì˜¤ê¸°ëŠ” [ResultSet ì¸í„°í˜ì´ìŠ¤](https://docs.oracle.com/javase/8/docs/api/)ì— ìˆëŠ” .get_() í•¨ìˆ˜ ì´ìš©(getString, .getint ë“±)
- ë°ì´í„°ë¥¼ ì‚½ì…í•˜ê³  ì‹¶ìœ¼ë©´ ResultSet ì¸í„°í˜ì´ìŠ¤ì— ìˆëŠ” .Set_()í•¨ìˆ˜ ì‚¬ìš©
- í•„ìˆ˜ì ìœ¼ë¡œ ê°€ì ¸ì™€ì•¼í•˜ëŠ” ê°ì²´
    - Connection ì¸í„°í˜ì´ìŠ¤
    - PreparedStatement ì¸í„°í˜ì´ìŠ¤
    - ResultSet ì¸í„°í˜ì´ìŠ¤
    - ì‘ì„±ìˆœì„œ
    
    ```sql
    **// ì¸í„°í˜ì´ìŠ¤ ê°ì²´ ìƒì„±**
    Connection con = null;         // DBì—°ê²°
    PreparedStatement psmt = null; //sqlë¬¸ ê°ì²´
    ResultSet rs = null;           //ê²°ê³¼ê°’ ì €ì¥
    			//ResultSet ê°ì²´ì•ˆë§Œë“¤ë©´ í›„ì— psmt.setString(ì—´ë²ˆí˜¸,ë°ì´í„°); ì‹ìœ¼ë¡œ ë„£ê¸°ê°€ëŠ¥
    
    try{
    	**//1. DBì—°ê²°**
    	con = Mysql.get();
    	//í´ë˜ìŠ¤ë¡œ ì—°ê²° ì•ˆí•´ë†¨ìœ¼ë©´ ì§ì ‘ ì—°ê²°
    	/*
    	Class.forName("com.mysql.cj.jdbc.Driver");
    	con = DriverManager.getConnection(
    		"jdbc:mysql://localhost:3306/sjh", "root", "1234");
    			    â†‘  URL                        â†‘ID     â†‘PW	
    	*/
    	
    	**//2. ë§¤ê°œë³€ìˆ˜í™”ëœ SQLë¬¸ ì‘ì„±**
    	String sql = ""+"INSERT INTO í…Œì´ë¸”ëª…(ì—´1,ì—´2)" + "VALUES(?,?)";
    																		// â†‘ì§€ì •í•œ ì—´ì—        â†‘4.ê°’ì§€ì •ì„ ë„£ê² ë‹¤
    	**//3.ê²°ê³¼ê°’ ì €ì¥**
    	psmt = con.prepareStatement(que);
    	//rs = psmt.executeQuery();ë¡œ ì¿¼ë¦¬ì‹¤í–‰ ê²°ê³¼ë¥¼ rsì— ì €ì¥í•  ìˆ˜ë„ ìˆìŒ
    				//ë°ì´í„° ê°€ì ¸ì˜¤ëŠ” select â†’ executeQuery();
    				//DML(insert, update, delete) â†’ executeUpdate();
    
    	**//4. ê°’ ì§€ì •**
    	psmt.setString(1, "whinter"); //prepareStatementì˜ setí•¨ìˆ˜ í˜¸ì¶œ
    	psmt.setString(2, "í•œê²¨ìš¸");   //resultSetìœ¼ë¡œ í•˜ëŠ” ê²½ìš° .getí•¨ìˆ˜ í˜¸ì¶œê°€ëŠ¥
    
    	**//5. SQLë¬¸ ì‹¤í–‰**
    	int rows = psmt.executeUpdate(); //DML(INSERT)í•˜ì˜€ìœ¼ë‹ˆ executeUpdate
    }catce(Exception e){
    	e.printStackTrace();
    }
    **//6. ë‹«ê¸°**
    psmt.close();
    con.close();
    ```
    

### ë°ì´í„° ì €ì¥, ìˆ˜ì •, ì‚­ì œ (executeUpdate())

### ë°ì´í„° ì €ì¥ INSERT

<aside>
ğŸ—£ INSERT INTO í…Œì´ë¸”ëª…(ì—´1, ì—´2, ì—´3 â€¦ ì—´n)
VALUES (?,?,?â€¦?)

</aside>

- ì‘ì„±ì˜ˆì‹œ
    
    ```java
    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.PreparedStatement;
    import java.sql.SQLException;
    
    public class Test {
    	public static void main(String[] args) throws SQLException {
    		Connection con = null;
    		
    		try {
    			//JDBC Driver ë“±ë¡ ë° ì—°ê²°
    			Class.forName("com.mysql.cj.jdbc.Driver");
    			con=DriverManager.getConnection("jdbc:mysql://localhost:3306/sjh", "root", "1234");
    			
    			//ë§¤ê°œë³€ìˆ˜í™”ëœ SQLë¬¸ ì‘ì„±
    			String sql = ""+"INSERT INTO users(id,name,pw,age,email)"+
    						"VALUES(?,?,?,?,?)";
    			
    			//PreparedStatement ì–»ê¸° ë° ê°’ ì§€ì •
    			PreparedStatement psmt = con.prepareStatement(sql);
    			psmt.setString(1, "winter");
    			psmt.setString(2, "í•œê²¨ìš¸");
    			psmt.setString(3, "12345");
    			psmt.setInt(4, 25);
    			psmt.setString(5, "winter@mycompany.com");
    			
    			//SQLë¬¸ ì‹¤í–‰
    			int row = psmt.executeUpdate();
    			System.out.println("ì €ì¥ëœ í–‰ ìˆ˜: "+row);		
    			
    			//PreparedStatement ë‹«ê¸°
    			psmt.close();
    		}
    		catch(Exception e) {
    			e.printStackTrace();
    		}
    		con.close();
    	}
    }
    ```
    
    - MySQL users í…Œì´ë¸” í™•ì¸
    
    <img src="/02. JAVA/00. img/15-6.png" width="400">

- ì‘ì„±ì˜ˆì‹œ2
    
    ```java
    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.PreparedStatement;
    import java.sql.SQLException;
    
    public class Test4 {
    
    	public static void main(String[] args) throws SQLException {
    		
    		String url = "jdbc:mysql://localhost:3306/sjh";
    		String que = "INSERT INTO emp(empno, ename, job)"
    					+"values(?,?,?)";
    		
    		// ?: ì£¼ê¸°ì  ë³€ê²½í•´ì„œ ì…ë ¥í•  ê°’(ë°”ì¸ë“œ ë³€ìˆ˜)
    		Connection con = null; //ì¸í„°í˜ì´ìŠ¤ë¼ nullë¡œ ë„£ì„ ìˆ˜ ìˆìŒ
    		PreparedStatement pstmt = null;
    		
    		try {
    			Class.forName("com.mysql.cj.jdbc.Driver");
    			con = DriverManager.getConnection(url, "root", "1234");
    			
    			pstmt = con.prepareStatement(que);
    			pstmt.setInt(1, 1234);
    			pstmt.setString(2, "Bob");
    			pstmt.setString(3, "ANALYST");
    			
    			pstmt.executeUpdate();			
    		}catch(Exception e) {
    			e.printStackTrace();
    		}
    		con.close();
    		
    	}
    }
    ```
    
    <img src="/02. JAVA/00. img/15-7.png" width="400">
    

### ë°ì´í„° ìˆ˜ì • UPDATE

<aside>
ğŸ—£ String sql = new StringBulider()
         .append(â€UPDATE í…Œì´ë¸”ëª… SETâ€)
         .append(â€ì—´1 = ?, â€)
         .append(â€ì—´2 = ?, â€)
         .append(â€ì—´n = ?â€)
        .toString();

</aside>

- ì‘ì„±ì˜ˆì‹œ
    
    ```java
    package test;
    
    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.PreparedStatement;
    import java.sql.SQLException;
    
    public class Test {
    	public static void main(String[] args) throws SQLException {
    		Connection con = null;
    		
    		try {
    			//JDBC Driver ë“±ë¡ ë° ì—°ê²°
    			Class.forName("com.mysql.cj.jdbc.Driver");
    			con=DriverManager.getConnection("jdbc:mysql://localhost:3306/sjh", "root", "1234");
    			
    			//ë§¤ê°œë³€ìˆ˜í™”ëœ SQLë¬¸ ì‘ì„±
    			String sql = new StringBuilder()
    					.append("UPDATE users SET ") //users í…Œì´ë¸” ì…‹íŒ…. SETë’¤ì— ë„ì–´ì“°ê¸° í•„ìˆ˜!
    					.append("name=?, ")
    					.append("pw=?, ")
    					.append("age=?, ")
    					.append("email=?")
    					.append("WHERE id=?") //ë³€ê²½ ì¡°ê±´ì€?
    					.toString();
    			
    			//PreparedStatement ì–»ê¸° ë° ê°’ ì§€ì •
    			PreparedStatement psmt = con.prepareStatement(sql);
    			psmt.setString(1, "í…ŒìŠ¤íŠ¸"); //ë²ˆí˜¸ëŠ” ì—´ë²ˆí˜¸ê°€ ì•„ë‹ˆë¼ ì´í´ë¦½ìŠ¤ì— ì‘ì„±í•œ ìˆœì„œëŒ€ë¡œ
    			psmt.setString(2, "00");
    			psmt.setInt(3, 30);
    			psmt.setString(4, "test@test.com");
    			psmt.setString(5, "snowman"); //1ì—´ì˜ idê°€ testì¸ ê²½ìš° ë³€ê²½
    			
    			//SQLë¬¸ ì‹¤í–‰
    			int rows = psmt.executeUpdate(); //ì˜¤ë¥˜ë‚¨. ì™œì§€???
    			System.out.println("ì €ì¥ëœ í–‰ ìˆ˜: "+rows);		
    			
    			//PreparedStatement ë‹«ê¸°
    			psmt.close();
    		}
    		catch(Exception e) {
    			e.printStackTrace();
    		}
    		con.close();
    	}
    }
    
    ```
    

### ë°ì´í„° ì‚­ì œ DELETE

<aside>
ğŸ—£ String sql = â€œDELETE FROM í…Œì´ë¸”ëª… WHERE ì—´ëª…=?â€;

</aside>

- ì‘ì„±ì˜ˆì‹œ
    
    ```java
    import java.sql.Connection;
    import java.sql.DriverManager;
    import java.sql.PreparedStatement;
    import java.sql.SQLException;
    
    public class Test {
    	public static void main(String[] args) throws SQLException {
    		Connection con = null;
    		
    		try {
    			//JDBC Driver ë“±ë¡ ë° ì—°ê²°
    			Class.forName("com.mysql.cj.jdbc.Driver");
    			con=DriverManager.getConnection("jdbc:mysql://localhost:3306/sjh", "root", "1234");
    			
    			//ë§¤ê°œë³€ìˆ˜í™”ëœ SQLë¬¸ ì‘ì„±
    			String sql = "DELETE FROM users WHERE id=?";
    			
    			//PreparedStatement ì–»ê¸° ë° ê°’ ì§€ì •
    			PreparedStatement psmt = con.prepareStatement(sql);
    			psmt.setString(1, "snowman");
    			
    			//SQLë¬¸ ì‹¤í–‰
    			int rows = psmt.executeUpdate();
    			System.out.println("ì €ì¥ëœ í–‰ ìˆ˜: "+rows);		
    			
    			//PreparedStatement ë‹«ê¸°
    			psmt.close();
    		}
    		catch(Exception e) {
    			e.printStackTrace();
    		}
    		con.close();
    	}
    }
    ```
    

### ë°ì´í„° ì½ê¸° (executeQuery())

- ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” selectë¬¸ì¼ ê²½ìš° executeQuery() ë©”ì†Œë“œ í˜¸ì¶œ
- executeQuery() ë©”ì†Œë“œëŠ” ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ResultSetì— ì €ì¥í•˜ê³  ë¦¬í„´
    
    <aside>
    ğŸ—£ ResultSet rs = psmt.executeQuery();
    
    </aside>
    
- ResultSet: SELECTë¬¸ì— ê¸°ìˆ ëœ ì»¬ëŸ¼ìœ¼ë¡œ êµ¬ì„±ëœ í–‰ì˜ ì§‘í•©
- next(): ì²« ë²ˆì§¸ ë°ì´í„° í–‰ì¸ firstí–‰ì„ ì½ìœ¼ë©´ì„œ ì»¤ì„œ ì´ë™, ë°˜í™˜í˜• boolean
           nê°œ ë°ì´í„° í–‰ì¼ ê²½ìš°: while(rs.next())
           1ê°œ ë°ì´í„° í–‰ì¼ ê²½ìš°: if(rs.next())
    
    <aside>
    ğŸ—£ boolean result = rs.next();
    
    </aside>
    

### ë°ì´í„° ê°€ì ¸ì˜¤ê¸°

- ì½”ë“œì‘ì„±
    
    ```sql
    package test;
    
    import java.sql.Connection;
    import java.sql.PreparedStatement;
    import java.sql.ResultSet;
    import java.sql.SQLException;
    
    public class Test {
    	public static void main(String[] args) throws SQLException {
    		Connection con = null;  //DBì™€ ì—°ê²°í•˜ëŠ” ì¸í„°í˜ì´ìŠ¤
    		PreparedStatement psmt = null; //sqlë¬¸ ê°ì²´
    		ResultSet rs = null; //sqlì— ëŒ€í•œ ë°˜í™˜(ì¿¼ë¦¬ ì‹¤í–‰ì— ëŒ€í•œ ê²°ê³¼ê°’ ì €ì¥)
    		
    		try {
    			String que = "select *from emp";
    			
    			con = Mysql.get(); //DBì—°ê²°: ì—°ê²°ëœ Mysqlì˜ í•¨ìˆ˜ í˜¸ì¶œ
    			
    			psmt = con.prepareStatement(que);
    			rs = psmt.executeQuery(); //ì¿¼ë¦¬ì‹¤í–‰ ê²°ê³¼ë¥¼ rsì— ì €ì¥
    			//select â†’ executeQuery()
    			//DML(insert, update, delete) â†’ executeUpdate();
    			
    			while(rs.next()) { //ResultSetì˜ í•¨ìˆ˜ next ê°€ì ¸ì˜´
    				//DBì— ìˆëŠ” ê°’ë“¤ì„ ê°€ì ¸ì˜´(í–‰ ê¸°ì¤€)
    				String empno = rs.getString(1); //intë¥¼ Stringìœ¼ë¡œ ê°€ì ¸ì™€ë„ ë¨
    				String ename = rs.getString(2);
    				String job = rs.getString(3);
    				int mgr = rs.getInt(4);
    				
    				java.sql.Date hiredate = rs.getDate(5); // sqlì€ ìƒëµ ê°€ëŠ¥
    				int sal = rs.getInt(6);
    				int comm = rs.getInt(7);
    				int deptno = rs.getInt(8); //(ì—´ë²ˆí˜¸)
    				
    				System.out.println(empno+" "+ename+" "+job);
    			}
    		}catch(Exception e) {
    			e.printStackTrace();
    		}
    		rs.close();
    		psmt.close();
    		con.close();
    	}
    }
    ----------------ì¶œë ¥ê²°ê³¼------------------------------------
    ì—°ë™ëœ MySQL ë°ì´í„°ë¥¼ ê°€ì ¸ì˜´
    ë°ì´í„°ë² ì´ìŠ¤ì— ì—°ê²°ë¨
    1111 gildong student
    2222 gildong student
    7369 SMITH CLERK
    7499 ALLEN SALESMAN
    7521 WARD SALESMAN
    7566 JONES MANAGER
    7654 MARTIN SALESMAN
    7698 BLAKE MANAGER
    7782 CLARK MANAGER
    7788 SCOTT ANALYST
    7839 KING PRESIDENT
    7844 TURNER SALESMAN
    7876 ADAMS CLERK
    7882 íˆíˆíˆ ëŒ€ë¦¬
    7900 JAMES CLERK
    7902 FORD ANALYST
    7934 MILLER CLERK
    ```
    
    - MySQLì— ì €ì¥ëœ emp í…Œì´ë¸”
        
        <img src="/02. JAVA/00. img/15-8.png" width="400">
        

### í”„ë¡œì‹œì €ì™€ í•¨ìˆ˜í˜¸ì¶œ (CallableStatement)

- í”„ë¡œì‹œì €ì™€ í•¨ìˆ˜ì˜ ë§¤ê°œë³€ìˆ˜í™” ëœ í˜¸ì¶œë¬¸ì„ ì‘ì„±í•˜ê³  Connectionì˜ prepareCall() ë©”ì†Œë“œë¡œë¶€í„° CallableStatementê°ì²´ë¥¼ ì–»ìŒ
    
    <aside>
    ğŸ—£ í”„ë¡œì‹œì €ë¥¼ í˜¸ì¶œí•  ê²½ìš°
    String sql  = â€œ{ call í”„ë¡œì‹œì €ëª…(?,?, â€¦) }â€;
    CallableStatment cstmt = con,prepareCall(sql);
    
    </aside>
    
    ```java
    //ë§¤ê°œë³€ìˆ˜í™”ëœ í˜¸ì¶œë¬¸ ì‘ì„±ê³¼ CallableStatement ì–»ê¸°
    String sql  = "{ call í”„ë¡œì‹œì €ëª…(?,?,?) }";
    CallableStatment cstmt = con,prepareCall(sql);
    
    // ? ê°’ ì§€ì • ë° ë¦¬í„´ íƒ€ì… ì§€ì •
    cstmt.setString(1,"summer");
    cstmt.setString(2,"í•˜ì—¬ë¦„");
    cstmt.setInt(1,25);
    
    //í”„ë¡œì‹œì € ì‹¤í–‰
    cstmt.execute();
    ```
    
    <aside>
    ğŸ—£ í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•  ê²½ìš°
    String sql = â€œ ? = call í•¨ìˆ˜ëª…(?,?, â€¦) â€;
    CallableStatment cstmt = con,prepareCall(sql);
    
    </aside>
    
    ```java
    //ë§¤ê°œë³€ìˆ˜í™”ëœ í˜¸ì¶œë¬¸ ì‘ì„±ê³¼ CallableStatement ì–»ê¸°
    String sql = " ? = call í•¨ìˆ˜ëª…(?,?) ";
    CallableStatment cstmt = con,prepareCall(sql);
    
    // ? ê°’ ì§€ì • ë° ë¦¬í„´ íƒ€ì… ì§€ì •
    cstmt.registerOutParameter(1, Types.*INTEGER*);
    cstmt.setString(2,"winter");
    cstmt.setString(3,"12345");
    
    //í•¨ìˆ˜ì‹¤í–‰
    cstmt.execute();
    ```
    

### íŠ¸ëœì­ì…˜ ì²˜ë¦¬

- íŠ¸ë™ì­ì…˜(transaction)ì€ ê¸°ëŠ¥ ì²˜ë¦¬ì˜ ìµœì†Œ ë‹¨ìœ„
- ìµœì†Œ ë‹¨ìœ„ë¼ëŠ” ê²ƒì€ êµ¬ì„±ëœ ì†Œì‘ì—…ë“¤ì„ ë¶„ë¦¬í•  ìˆ˜ ì—†ìœ¼ë©°, ì „ì²´ë¥¼ í•˜ë‚˜ë¡œ ë´„(ëª¨ë‘ ì„±ê³µ or ëª¨ë‘ ì‹¤íŒ¨)
- DBëŠ” íŠ¸ë™ì­ì…˜ì„ ì²˜ë¦¬í•˜ê¸° ìœ„í•´ ì»¤ë°‹(commint)ê³¼ ë¡¤ë°±(rollback)ì œê³µ
    - ì»¤ë°‹: ë‚´ë¶€ ì‘ì—…ì„ ëª¨ë‘ ì„±ê³µ ì²˜ë¦¬ (JDBCì—ì„œëŠ” DMLì´ ìë™ ì»¤ë°‹ë˜ì„œ ì•ˆì ì–´ë„ ë¨)
    - ë¡¤ë°±: ì‹¤í–‰ ì „ìœ¼ë¡œ ëŒì•„ê°„ë‹¤ëŠ” ì˜ë¯¸ì—ì„œ ëª¨ë‘ ì‹¤íŒ¨ ì²˜ë¦¬
    - ë‘ ê°œ ì´ìƒì˜ ì‘ì—… ì¤‘ ì²« ë²ˆì§¸ ì‘ì—…ì´ ëë‚˜ê³  ì»¤ë°‹ì´ ë˜ë©´ ì•ˆë˜ë‹ˆ ìë™ ì»¤ë°‹ê¸°ëŠ¥ì„ ë”
        
        <aside>
        ğŸ—£ con.setAutoCommit(false);
        
        </aside>
        

```sql
Connection con = null;
try{
//íŠ¸ëœì­ì…˜ ì‹œì‘---------------------
	//ìë™ ì»¤ë°‹ ê¸°ëŠ¥ ë„ê¸°
	con.setAutoCommit(false); //í•˜ë‚˜ì˜ ì‘ì—…ë§Œ ì²˜ë¦¬ë˜ì§€ ì•Šë„ë¡ ë”
	
	//ì†Œì‘ì—… ì²˜ë¦¬1
	
	//ì†Œì‘ì—… ì²˜ë¦¬2
	
	//ì»¤ë°‹ -> ëª¨ë‘ ì„±ê³µ ì²˜ë¦¬
	con.commit();
}catch(Exception e){
	con.rollback();    //ë¡¤ë°± -> ëª¨ë‘ ì‹¤íŒ¨ ì²˜ë¦¬
}
```

### ì»¤ë„¥ì…˜ í’€

- ì¼ì •ëŸ‰ì˜ Connetionì„ ë¯¸ë¦¬ ìƒì„± â†’ ì„œë²„ì—ì„œ í´ë¼ì´ì–¸íŠ¸ì˜ ìš”ì²­ì„ ì²˜ë¦¬í•  ë•Œ ì œê³µí•˜ê³  ë‹¤ì‹œ ë°˜í™˜ë°›ìŒ
    
    <img src="/02. JAVA/00. img/15-9.png" width="400">
    
- ì¥ì 
    - ìƒì„±ëœ Connectionì„ ì¬ì‚¬ìš©í•  ìˆ˜ ìˆìŒ
    - DBì—°ê²° ì‹œê°„ì„ ì¤„ì¼ ìˆ˜ ìˆìŒ
    - ì „ì²´ Connection ìˆ˜ë¥¼ ê´€ë¦¬í•  ìˆ˜ ìˆìŒ

### ê²Œì‹œíŒ êµ¬í˜„

- 948
- ê²Œì‹œíŒì€ ê¸°ë³¸ì ì¸ **CRUD**(Ctrate, Read, Update, Delete) ê¸°ëŠ¥ì´ í¬í•¨ë¨

```sql
949 - 968
```